El Proceso Detallado para Grabar Programas en el Microcontrolador XC164 y la Memoria EEPROM 24FC128

Grabar un programa en un microcontrolador Infineon XC164 y en una memoria EEPROM 24FC128 implica dos procesos distintos pero interconectados. El microcontrolador se programa con el código de la aplicación, mientras que la EEPROM se utiliza para almacenar datos de forma no volátil que el microcontrolador puede leer y escribir durante su funcionamiento. A continuación se detalla el procedimiento para cada uno.

Grabación del Programa en el Microcontrolador Infineon XC164

El proceso para programar el microcontrolador XC164 generalmente sigue estos pasos:

1. Preparación del Entorno de Desarrollo:

Software: Necesitarás un entorno de desarrollo integrado (IDE) compatible con la arquitectura C166 de Infineon. Algunas opciones populares incluyen:

Keil C166/A166 Development Tools: Un conjunto de herramientas de software muy utilizado para los microcontroladores de la familia C166.[1]

TASKING VX-toolset for C166: Otra suite de compilador y depurador profesional.

Infineon DAVE™: Un entorno de desarrollo gratuito de Infineon que puede generar código de inicialización.

Hardware de Programación/Depuración: Se requiere un programador o depurador por hardware para establecer la comunicación entre el PC y el microcontrolador XC164. Las herramientas comunes son:

Infineon DAP miniWiggler: Una herramienta de depuración y programación de bajo costo de Infineon.[2]

Keil ULINK2: Un adaptador de depuración y trazado que funciona con el IDE de Keil.[2]

Programadores de terceros como los de Dataman.[2]

2. Escritura y Compilación del Código:

Escribe el código de tu aplicación en lenguaje C o ensamblador utilizando el IDE que hayas elegido. Este código definirá el comportamiento y las funciones del microcontrolador.

Para aplicaciones que necesiten interactuar con la EEPROM 24FC128, deberás incluir el código para la comunicación I2C.

Una vez escrito el código, compílalo utilizando el compilador del IDE. Este proceso convierte el código fuente en un archivo hexadecimal (.hex) o binario (.bin) que el microcontrolador puede entender.

3. Conexión del Hardware:

Conecta el programador/depurador (como el miniWiggler o ULINK2) al puerto JTAG o DAP (Debug Access Port) del microcontrolador XC164 en tu placa de circuito.

Conecta el programador al PC a través de USB.

4. Programación del Microcontrolador:

Utiliza una utilidad de software de programación, como Infineon MemTool[3] o la funcionalidad de programación integrada en tu IDE (Keil, TASKING).

En la herramienta de programación, selecciona el archivo .hex o .bin que generaste en el paso de compilación.

Establece la conexión con el microcontrolador a través del programador.

Inicia el proceso de grabación. El software transferirá el código desde el PC a la memoria Flash interna del XC164.

Después de la programación, es una buena práctica verificar que el programa se ha escrito correctamente.

Grabación de Datos en la Memoria EEPROM 24FC128

La EEPROM 24FC128 es un dispositivo de almacenamiento de datos que se comunica a través del protocolo I2C.[4][5] Por lo tanto, el microcontrolador XC164 es el encargado de escribir (grabar) datos en ella.

1. Interfaz Física:

La comunicación entre el XC164 y la 24FC128 se realiza a través de dos líneas:

SDA (Serial Data): Línea de datos.

SCL (Serial Clock): Línea de reloj.

Estas líneas deben estar conectadas a los pines del XC164 que soportan la funcionalidad I2C. Consulta el manual de usuario del XC164 para identificar estos pines.[6]

Se requieren resistencias de pull-up en las líneas SDA y SCL.

2. Implementación del Protocolo I2C en el XC164:

El microcontrolador XC164 necesita tener implementado un controlador (driver) I2C. Esto se puede lograr de dos maneras:

Uso del Periférico I2C por Hardware: El XC164 dispone de módulos de hardware I2C que gestionan la mayor parte de la comunicación. Deberás configurar los registros correspondientes para establecer la velocidad del bus, la dirección del esclavo, etc.

Implementación por Software (Bit-Banging): Si no se utiliza el periférico de hardware, se pueden emular las señales I2C controlando directamente los pines de E/S del microcontrolador. Sin embargo, este método es menos eficiente.

3. Procedimiento de Escritura en la EEPROM:

El código dentro del microcontrolador XC164 seguirá estos pasos para grabar datos en la 24FC128:

Iniciar la Comunicación I2C: El XC164 (maestro) genera una condición de inicio en el bus I2C.

Enviar la Dirección del Dispositivo: Se envía la dirección de 7 bits de la EEPROM 24FC128 seguida de un bit de escritura (0). La dirección base de la 24FC128 es 1010 seguida de tres pines de dirección de hardware (A0, A1, A2) que permiten tener hasta ocho de estas memorias en el mismo bus.

Enviar la Dirección de Memoria: Se envían uno o dos bytes que especifican la dirección de memoria interna de la EEPROM donde se van a escribir los datos. La 24FC128 tiene 128 Kbits, lo que equivale a 16 Kbytes de memoria (16384 bytes).

Enviar los Datos: Se envían los bytes de datos que se desean almacenar en la EEPROM. La 24FC128 permite la escritura de páginas de hasta 64 bytes a la vez.

Finalizar la Comunicación: El XC164 genera una condición de parada para liberar el bus I2C.

En resumen, el procedimiento general es:

Desarrollar y compilar el código para el XC164, incluyendo las rutinas de comunicación I2C.

Utilizar un programador por hardware para cargar el código compilado en la memoria Flash del XC164.

Una vez que el XC164 está en funcionamiento, ejecutará el código que, a su vez, se comunicará con la EEPROM 24FC128 a través del bus I2C para leer o escribir datos según lo programado.

Existen numerosos ejemplos de código y librerías para la comunicación I2C con memorias EEPROM para diversas plataformas de microcontroladores que pueden ser adaptados para el XC164.

Sources
help
arm.com
keil.com
embeddedrelated.com
microchip.com
aquihayapuntes.com
keil.com
Google Search Suggestions
Display of Search Suggestions is required when using Grounding with Google Search. Learn more
programar microcontrolador Infineon XC164
grabar datos en EEPROM 24FC128
herramientas para programar Infineon XC164
interfaz entre microcontrolador XC164 y EEPROM 24FC128
